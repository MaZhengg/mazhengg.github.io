<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>ROS nodelet 介绍</title>
      <link href="/2018/04/09/ROS-nodelet-%E4%BB%8B%E7%BB%8D/"/>
      <url>/2018/04/09/ROS-nodelet-%E4%BB%8B%E7%BB%8D/</url>
      <content type="html"><![CDATA[<p>ROS的数据通信在graph结构中以topic,service和param的方式传输数据，数据交互存在一定的延时和阻塞。Nodelet 包就是为改善这一状况设计的， 使得多个算法运行在同一个进程中，并且算法间数据传输无需拷贝就可实现。 详见<a href="http://wiki.ros.org/nodelet。" target="_blank" rel="noopener">http://wiki.ros.org/nodelet。</a> 简单的讲就是可以将以前启动的多个node捆绑在一起manager，使得同一个manager里面的topic的数据传输更快，数据通讯中roscpp采用boost shared pointer方式进行publish调用，实现zero copy。Nodelet是借助pluginlib来实现插件动态加载的，文章<a href="http://www.guyuehome.com/920" target="_blank" rel="noopener">pluginlib</a>特别通俗易懂的说明了pluginlib的工作原理，在理解pluginlib的基础上看nodelet会更容易。</p><a id="more"></a><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>nodelet的工作原理类似于pluginlib，可以参考上边所说的博客中的原理图。</p><h2 id="实现一个nodelet插件类"><a href="#实现一个nodelet插件类" class="headerlink" title="实现一个nodelet插件类"></a>实现一个nodelet插件类</h2><p>nodelet的实现因为借助了pluginlib的插件动态加载，因此nodelet的实现遵循pluginlib的使用规则，主要步骤如下：</p><ol><li>创建基类，定义统一的接口。如果是基于现有的基类，则不需要这个步骤</li><li>创建nodelet插件类，继承基类，实现统一的接口</li><li>注册nodelet插件类</li><li>编译生成插件的动态链接库</li><li>将nodelet加入ROS系统</li></ol><p>接下来，我们就根据这几个步骤来实现一个简单的nodelet功能，在开始之前需要建立一个example_pkg的功能包。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">catkin_create_pkg example_pkg</span><br></pre></td></tr></table></figure><p>完整的功能包代码可以在<a href="">github</a>上下载。</p><h2 id="创建基类"><a href="#创建基类" class="headerlink" title="创建基类"></a>创建基类</h2><p>其中基类nodelet是现有的，所以我们不需要创建基类，只需要继承nodelet基类即可。</p><h2 id="创建nodelet插件类并注册插件类"><a href="#创建nodelet插件类并注册插件类" class="headerlink" title="创建nodelet插件类并注册插件类"></a>创建nodelet插件类并注册插件类</h2><p>接下来我们来创建MyNodeletClass类(MyNodeletClass.h)定义，放置于目录example_pkg/include/example_pkg/下。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;nodelet/nodelet.h&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> example_pkg</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">MyNodeletClass</span> :</span> <span class="keyword">public</span> nodelet::Nodelet</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span>:</span><br><span class="line">            <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">onInit</span><span class="params">()</span></span>;</span><br><span class="line">            <span class="comment">//要求构造函数不能带有参数，所以调用OnInit来完成需要初始化的工作</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建MyNodeletClass类实现(MyNodeletClass.cpp)，放置于目录example_pkg/src/下。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this should really be in the implementation (.cpp file)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ros/ros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;pluginlib/class_list_macros.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;example_pkg/MyNodeletClass.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> example_pkg</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> MyNodeletClass::onInit()</span><br><span class="line">    &#123;</span><br><span class="line">        NODELET_DEBUG(<span class="string">"Initializing nodelet..."</span>);</span><br><span class="line">        ROS_INFO(<span class="string">"Nodelet is Ok for test!!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册插件类</span></span><br><span class="line">PLUGINLIB_DECLARE_CLASS(example_pkg, MyNodeletClass, example_pkg::MyNodeletClass, nodelet::Nodelet)</span><br></pre></td></tr></table></figure><h3 id="创建插件类的描述符-nodelet-plugins-xml-，放置于目录example-pkg-plugins-下。"><a href="#创建插件类的描述符-nodelet-plugins-xml-，放置于目录example-pkg-plugins-下。" class="headerlink" title="创建插件类的描述符(nodelet_plugins.xml)，放置于目录example_pkg/plugins/下。"></a>创建插件类的描述符(nodelet_plugins.xml)，放置于目录example_pkg/plugins/下。</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">library</span> <span class="attr">path</span>=<span class="string">"lib/libexample_pkg"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">"example_pkg/MyNodeletClass"</span> <span class="attr">type</span>=<span class="string">"example_pkg::MyNodeletClass"</span> <span class="attr">base_class_type</span>=<span class="string">"nodelet::Nodelet"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">  This is my nodelet.</span><br><span class="line">  <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">library</span>&gt;</span></span><br></pre></td></tr></table></figure><p>可以看到，这个xml文件主要描述了nodelet的动态库路径，实现类，基类，描述等信息。</p><h3 id="编译插件的动态连接库并将插件加入ROS系统"><a href="#编译插件的动态连接库并将插件加入ROS系统" class="headerlink" title="编译插件的动态连接库并将插件加入ROS系统"></a>编译插件的动态连接库并将插件加入ROS系统</h3><p>为了编译插件的功能包，需要修改CMakeLists.txt文件，修改一下内容，将插件编译为动态连接库。</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">3</span>)</span><br><span class="line"><span class="keyword">project</span>(example_pkg)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Find catkin macros and libraries</span></span><br><span class="line"><span class="comment">## if COMPONENTS list like find_package(catkin REQUIRED COMPONENTS xyz)</span></span><br><span class="line"><span class="comment">## is used, also find other catkin packages</span></span><br><span class="line"><span class="keyword">find_package</span>(catkin REQUIRED COMPONENTS nodelet roscpp)</span><br><span class="line"><span class="keyword">find_package</span>(Boost REQUIRED)</span><br><span class="line"></span><br><span class="line">catkin_package(</span><br><span class="line">   INCLUDE_DIRS <span class="keyword">include</span></span><br><span class="line">   LIBRARIES <span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">   CATKIN_DEPENDS nodelet roscpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">###########</span></span><br><span class="line"><span class="comment">## Build ##</span></span><br><span class="line"><span class="comment">###########</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Specify additional locations of header files</span></span><br><span class="line"><span class="comment">## Your package locations should be listed before other locations</span></span><br><span class="line"><span class="keyword">include_directories</span>(</span><br><span class="line">  <span class="keyword">include</span></span><br><span class="line">  <span class="variable">$&#123;catkin_INCLUDE_DIRS&#125;</span></span><br><span class="line">  <span class="variable">$&#123;Boost_INCLUDE_DIRS&#125;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Declare a C++ library</span></span><br><span class="line"><span class="keyword">add_library</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span>  src/MyNodeletClass.cpp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_dependencies</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span> </span><br><span class="line">   <span class="variable">$&#123;$&#123;PROJECT_NAME&#125;</span>_EXPORTED_TARGETS&#125; </span><br><span class="line">   <span class="variable">$&#123;catkin_EXPORTED_TARGETS&#125;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">   <span class="variable">$&#123;catkin_LIBRARIES&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>对package.xml文件进行修改，添加构建和运行依赖项(nodelet和roscpp)。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>catkin<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>nodelet<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>roscpp<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>nodelet<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>roscpp<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- The export tag contains other, unspecified, tags --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">export</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Other tools can request additional information be placed here --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nodelet</span> <span class="attr">plugin</span>=<span class="string">"$&#123;prefix&#125;/plugins/nodelet_plugins.xml"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">export</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后我们可以通过下面的命令来查看该功能包是否编译为nodelet的插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rospack plugins --attrib=plugin nodelet</span><br></pre></td></tr></table></figure><p>如果没有问题，会出现一系列nodelet的插件路径，其中应该有上边添加的插件的路径，我的插件路径为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">/opt/ros/kinetic/share/pcl_ros/pcl_nodelets.xml</span><br><span class="line">/home/username/catkin_turtlebot/src/example_pkg/plugins/nodelet_plugins.xml <span class="comment">#创建的插件路径</span></span><br><span class="line">/opt/ros/kinetic/share/image_publisher/nodelet_plugins.xml</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>插件的路径比较多，没有全列出来。</p><h2 id="编写启动文件-mynodelet-launch"><a href="#编写启动文件-mynodelet-launch" class="headerlink" title="编写启动文件(mynodelet.launch):"></a>编写启动文件(mynodelet.launch):</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"nodelet"</span> <span class="attr">type</span>=<span class="string">"nodelet"</span> <span class="attr">name</span>=<span class="string">"standalone_nodelet"</span>  <span class="attr">args</span>=<span class="string">"manager"</span> <span class="attr">output</span>=<span class="string">"screen"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">"nodelet"</span> <span class="attr">type</span>=<span class="string">"nodelet"</span> <span class="attr">name</span>=<span class="string">"MyNodeletClass"</span> <span class="attr">args</span>=<span class="string">"load example_pkg/MyNodeletClass standalone_nodelet"</span> <span class="attr">output</span>=<span class="string">"screen"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">node</span>&gt;</span>                 </span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="编译并测试"><a href="#编译并测试" class="headerlink" title="编译并测试"></a>编译并测试</h2><p>根目录下编译后，运行launch文件，如果没有问题，可以看到如下结果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">username@username-HP-ProBook-440-G3:~/catkin_turtlebot$ roslaunch example_pkg mynodelet.launch </span><br><span class="line">... logging to /home/username/.ros/<span class="built_in">log</span>/7e42af3c-3b9c-11e8-8278-a86bad0ea915/roslaunch-username-HP-ProBook-440-G3-13823.log</span><br><span class="line">Checking <span class="built_in">log</span> directory <span class="keyword">for</span> disk usage. This may take awhile.</span><br><span class="line">Press Ctrl-C to interrupt</span><br><span class="line">Done checking <span class="built_in">log</span> file disk usage. Usage is &lt;1GB.</span><br><span class="line"></span><br><span class="line">started roslaunch server http://username-HP-ProBook-440-G3:35479/</span><br><span class="line"></span><br><span class="line">SUMMARY</span><br><span class="line">========</span><br><span class="line"></span><br><span class="line">PARAMETERS</span><br><span class="line"> * /rosdistro: kinetic</span><br><span class="line"> * /rosversion: 1.12.13</span><br><span class="line"></span><br><span class="line">NODES</span><br><span class="line">  /</span><br><span class="line">    MyNodeletClass (nodelet/nodelet)</span><br><span class="line">    standalone_nodelet (nodelet/nodelet)</span><br><span class="line"></span><br><span class="line">ROS_MASTER_URI=http://localhost:11311</span><br><span class="line"></span><br><span class="line">process[standalone_nodelet-1]: started with pid [13840]</span><br><span class="line">process[MyNodeletClass-2]: started with pid [13841]</span><br><span class="line">[ INFO] [1523264216.026517404]: Loading nodelet /MyNodeletClass of <span class="built_in">type</span> example_pkg/MyNodeletClass to manager standalone_nodelet with the following remappings:</span><br><span class="line">[ INFO] [1523264216.027989431]: waitForService: Service [/standalone_nodelet/load_nodelet] has not been advertised, waiting...</span><br><span class="line">[ INFO] [1523264216.071444856]: Initializing nodelet with 4 worker threads.</span><br><span class="line">[ INFO] [1523264216.090658134]: waitForService: Service [/standalone_nodelet/load_nodelet] is now available.</span><br><span class="line">[ INFO] [1523264216.092255988]: Nodelet is Ok <span class="keyword">for</span> <span class="built_in">test</span>!!</span><br></pre></td></tr></table></figure><p>成功后会显示Nodelet is Ok for test!!<br>这样，我们就完成了nodelet插件的实现和调用。</p>]]></content>
      
      <categories>
          
          <category> ROS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ros </tag>
            
            <tag> nodelet </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>电影记录</title>
      <link href="/2018/03/30/%E7%94%B5%E5%BD%B1%E8%AE%B0%E5%BD%95/"/>
      <url>/2018/03/30/%E7%94%B5%E5%BD%B1%E8%AE%B0%E5%BD%95/</url>
      <content type="html"><![CDATA[<p>本文主要记录自己喜欢的电影！（排名不分前后）<br><a id="more"></a></p><h2 id="剧情片"><a href="#剧情片" class="headerlink" title="剧情片"></a>剧情片</h2><p>1，背对背，脸对脸<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">◎译　　名　Back.To.Back.Face.To.Face</span><br><span class="line">◎片　　名　背靠背，脸对脸</span><br><span class="line">◎年　　代　1994</span><br><span class="line">◎国　　家　中国大陆/香港</span><br><span class="line">◎类　　别　剧情</span><br><span class="line">◎语　　言　汉语普通话</span><br><span class="line">◎上映日期　1994-09-10(多伦多电影节)</span><br></pre></td></tr></table></figure></p><p>2，驴得水<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">◎译　　名　Mr.Donkey</span><br><span class="line">◎片　　名　驴得水</span><br><span class="line">◎年　　代　2016</span><br><span class="line">◎国　　家　中国大陆</span><br><span class="line">◎类　　别　剧情/喜剧</span><br><span class="line">◎语　　言　汉语普通话</span><br><span class="line">◎上映日期　2016-10-28(中国大陆)</span><br></pre></td></tr></table></figure></p><p>3，爱·回家<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">◎译　　名　爱·回家/外婆的家/回家路上/有你真好/回家路/一屋两婆孙/The Way Home</span><br><span class="line">◎片　　名　집으로</span><br><span class="line">◎年　　代　2002</span><br><span class="line">◎国　　家　韩国</span><br><span class="line">◎类　　别　剧情</span><br><span class="line">◎语　　言　韩语</span><br><span class="line">◎上映日期　2002-04-05(韩国)</span><br></pre></td></tr></table></figure></p><p>4，天注定<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">◎片　　名　天注定</span><br><span class="line">◎别　　名　A Touch of Sin</span><br><span class="line">◎年　　代　2013</span><br><span class="line">◎地　　区　中国大陆</span><br><span class="line">◎类　　别　剧情</span><br><span class="line">◎语　　言　汉语普通话</span><br><span class="line">◎上映日期　2013-05-17(戛纳电影节)/2013-09-11(多伦多电影节)</span><br></pre></td></tr></table></figure></p><p>5，斯坦福监狱实验<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">◎译　　名　斯坦福监狱实验</span><br><span class="line">◎片　　名　The Stanford Prison Experiment</span><br><span class="line">◎年　　代　2015</span><br><span class="line">◎国　　家　美国</span><br><span class="line">◎类　　别　剧情/惊悚</span><br><span class="line">◎语　　言　英语</span><br><span class="line">◎上映日期　2015-07-17(美国)</span><br></pre></td></tr></table></figure></p><p>6，十二怒汉<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">◎译　  名　十二怒汉/12怒汉</span><br><span class="line">◎片　  名　12 Angry Men</span><br><span class="line">◎年　  代　1957</span><br><span class="line">◎国　  家　美国</span><br><span class="line">◎类　  别　犯罪 剧情</span><br><span class="line">◎语　  言　英语 </span><br><span class="line">（相似剧情中国影片，十二公民）</span><br></pre></td></tr></table></figure></p><p>7，莫娣<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@译　　名　莫娣 </span><br><span class="line">@片　　名　Maudie</span><br><span class="line">@年　　代　2017-04-17(加拿大) / 2017-06-16(美国) / 2017-08-04(爱尔兰)</span><br><span class="line">@地　　区　加拿大 / 爱尔兰</span><br><span class="line">@类　　别　剧情 / 爱情 / 传记</span><br><span class="line">@语　　言　英语</span><br></pre></td></tr></table></figure></p><p>8，心迷宫<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@译　　名　心迷宫/殡棺</span><br><span class="line">@片　　名　The Coffin in the Mountain/Deep in the Heart</span><br><span class="line">@年　　代　2015</span><br><span class="line">@地　　区　中国大陆</span><br><span class="line">@类　　别　剧情/悬疑/犯罪</span><br><span class="line">@语　　言　汉语普通话</span><br></pre></td></tr></table></figure></p><h2 id="恐怖片"><a href="#恐怖片" class="headerlink" title="恐怖片"></a>恐怖片</h2><p>1，中邪</p><p>很简单的故事，但剧情跌宕起伏。（自认为承受能力不错，至今不想回想，更别提再看一遍，惊吓指数在我这里匹配与《贞子1》，一个人观看慎重）<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">◎译     名: Exorcism</span><br><span class="line">◎片     名: 中 邪</span><br><span class="line">◎年     代: 2016</span><br><span class="line">◎上映日期: 2016-07-23（中国大陆）</span><br><span class="line">◎国     家: 中国大陆</span><br><span class="line">◎类     型: 剧情 / 悬疑 / 恐怖</span><br><span class="line">◎语     言: 汉语普通话</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>正交矩阵的凯莱公式</title>
      <link href="/2018/03/30/%E6%AD%A3%E4%BA%A4%E7%9F%A9%E9%98%B5%E7%9A%84%E5%87%AF%E8%8E%B1%E5%85%AC%E5%BC%8F/"/>
      <url>/2018/03/30/%E6%AD%A3%E4%BA%A4%E7%9F%A9%E9%98%B5%E7%9A%84%E5%87%AF%E8%8E%B1%E5%85%AC%E5%BC%8F/</url>
      <content type="html"><![CDATA[<p>本文主要说明一个线性代数的主要结论-正交矩阵的凯莱公式：<br>对于任何正交矩阵 $R$, 存在一个反对称矩阵 $S$, 满足 $R=(I_3-S)^{-1}(I_3+S)$ ，此记！<br><a id="more"></a></p><p>对于原点 $O$ 的一个旋转表示为：<br>\begin{equation}<br>P’=AP<br>\end{equation}<br>其中， $A$ 是一个正交矩阵。因为旋转后的向量长度不发生变化，所以 $({OP})^2=({OP’})^2$ ，并且<br>$$P’\cdot P’-P\cdot P=0$$<br>或者表示为：<br>\begin{equation}<br>(P’-P)\cdot (P’+P)=0<br>\end{equation}<br>其中， $P$ 是任意向量。因此可以得到 $f=P’-P$ 和 $g=P’+P$ 是正交向量。将 $f$，$g$ 和 $P$ 以列向量的形式表示，得到<br>\begin{equation}<br>f=(A-I)P, g=(A+I)P, f\cdot g=0<br>\end{equation}<br>排除 $-1$ 是矩阵 $A$ 的特征值的特例， $A+I$ 就是一个非奇异矩阵，并且<br>\begin{equation}<br>P=(A+I)^{-1}g<br>\end{equation}<br>那么，<br>$$f=(A-I)(A+I)^{-1}g.$$<br>假设<br>\begin{equation}<br>(A-I)(A+I)^{-1}=B，\star<br>\end{equation}<br>那么，<br>\begin{equation}<br>f=Bg<br>\end{equation}<br>假设 $B=[b_{ik}]$ ， $g_i$ 是向量 $g$ 的元素。那么，对于任意的向量 $g$ ， $f\cdot g=0$ 可以改写为：<br>$$\sum_{i,k}(b_{ik}+b_{ki})g_ig_k=0$$<br>那么就可以得到：对于所有的 $i,k$ ， $b_{ik}+b_{ki}=0$ 。因此矩阵$B$是反对称矩阵(skew matrix)。根据公式 $\star$ 可得：<br>$$A-I=B(A+I)$$<br>或者<br>\begin{equation}<br>(I-B)A=I+B<br>\end{equation}</p><p>我们知道，如果矩阵$B$是一个实反对称矩阵，那么 $|B|\geq 0$ 。因此， $|B+\lambda I|$ 是关于 $\lambda$ 的带非负系数的多项式，并且除了取 $\lambda=0$ 外多项式的值不为0。也就说 $|B-I|\neq 0$ 。</p><p>可以得到结论：对于任意的 $-1$ 不是它的特征值的正交矩阵，正交矩阵可以写为：<br>\begin{equation}<br>A=(I-B)^{-1}(I+B)<br>\end{equation}<br>其中， $B$ 是反对称矩阵，以上公式成为称为凯莱公式。</p><p>参考文献：</p><p>[1]Bottema O, Roth B. Theoretical Kinematics[M]. North-holland Publishing, 1979，pp: 9-10.</p>]]></content>
      
      <categories>
          
          <category> Robotics </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>等效轴角坐标系表示法</title>
      <link href="/2018/03/30/%E7%AD%89%E6%95%88%E8%BD%B4%E8%A7%92%E5%9D%90%E6%A0%87%E7%B3%BB%E8%A1%A8%E7%A4%BA%E6%B3%95/"/>
      <url>/2018/03/30/%E7%AD%89%E6%95%88%E8%BD%B4%E8%A7%92%E5%9D%90%E6%A0%87%E7%B3%BB%E8%A1%A8%E7%A4%BA%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>本文主要讲述等效轴角坐标系表示法的导出过程，其中涉及到罗德里格斯公式（<a href="https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula" target="_blank" rel="noopener">Rodrigues’ rotation formula</a>）的推导，此记。</p><a id="more"></a><p>首先将坐标系 $B$ 和一个已知参考坐标系 $A$ 重合。将 $B$ 绕矢量 $^A\hat{K}$ 按右手定则旋转 $\theta$ 角度。<br>等效旋转矩阵的表示形式推导：</p><p>目标：将向量 $v=(x,y,z)$ 绕一般方向（而不是主轴方向） $\hat{r}$ （假设 $\hat{r}$ 是单位向量，如果不是，先进行单位化）旋转 $\theta$ 角度，如图1所示。</p><img src="/2018/03/30/等效轴角坐标系表示法/等效轴角坐标系表示法1.jpg" width="400" height="268" title="图1 旋转立体示意图"><p>首先，将向量 $v$ 分解为两部分：平行于 $\hat{r}$ 的 $v_{||}$ 和垂直于 $\hat{r}$ 的 $v_{\bot}$，并且很容易可以得到:</p><p>$$v_{||}=(v\cdot \hat{r})\hat{r}$$</p><p>$$v=v_{||}+v_{\bot}$$</p><p>$$v_{\bot}=v-v_{||}$$</p><p>$$v_{\bot}=v-(v\cdot \hat{r})\hat{r}$$</p><p>假设，$T$ 是我们所要研究的旋转，我们需要计算 $T(v)$：</p><p>\begin{align}<br>T(v) &amp; =T(v_{||}+v_{\bot})\\<br>&amp; = T(v_{||})+T(v_{\bot})<br>\end{align}</p><p>因为 $v_{||}$ 平行于旋转轴 $hat{r}$ ，所以</p><p>$$T(v_{||})=v_{||}$$</p><p>可以得到：</p><p>$$T(v)=v_{||}+T(v_{\bot})$$</p><p>其中， $T(v_{\bot})$ 是唯一需要求解的量。所以我们建立旋转平面上的两个基向量(如下图)，把 $v_{\bot}$ 作为第一个基向量，第二个基向量用</p><p>\begin{align}<br>w &amp; =\hat{r}\times v_{\bot}\\<br> &amp; = \hat{r}\times v<br>\end{align}</p><img src="/2018/03/30/等效轴角坐标系表示法/等效轴角坐标系表示法2.jpg" width="468" height="330" title="图2 $v_{\bot}$旋转平面示意图"><p>根据图2，我们可以得到：</p><p>\begin{align}<br>T(v_{\bot}) &amp; = v_{\bot}cos\theta+ w sin\theta\\<br>&amp;= v_{\bot}cos\theta+(\hat{r}\times v)sin\theta<br>\end{align}</p><p>因此，</p><p>\begin{align}<br>T(v) &amp; =v_{||}+T(v_{\bot})\\<br>&amp;=(v\cdot \hat{r})\hat{r}+ v_{\bot}cos\theta+ (\hat{r}\times v)sin\theta\\<br>&amp;=(v\cdot \hat{r})\hat{r}+ [v-(v\cdot \hat{r})\hat{r}]cos\theta+(\hat{r}\times v)sin\theta\\<br>&amp;=(v\cdot \hat{r})\hat{r}+ vcos\theta- (v\cdot \hat{r})\hat{r}cos\theta+ (\hat{r}\times v)sin\theta\\<br>&amp;=(1-cos \theta)(v\cdot \hat{r})\hat{r}+ v cos\theta+ (\hat{r}\times v)sin\theta\end{align}</p><hr><p>得到的该式为Rodrigues公式：</p><p>$$T(v)=(1-cos \theta)(v\cdot \hat{r})\hat{r}+ v cos\theta+ (\hat{r}\times v)sin\theta$$</p><hr><p>至此，经过变换之后的向量形式已经表示出来了。可以分别通过三个基向量来求得等效旋转矩阵的一般形式：</p><p>$$p=\begin{vmatrix}1 &amp;0 &amp;0\end{vmatrix}^T $$</p><p>将向量 $p$ 绕轴 $\hat{r}=[k_x,k_y,k_z]$ 旋转(这里为了和参考书形式相同，采用 $k$ 表示)之后的形式表示为，</p><p>\begin{align}<br>p’ &amp; =(1-cos \theta)(p\cdot \hat{r})\hat{r}+ pcos\theta+(\hat{r}\times p)sin\theta\\<br>&amp;=(1-cos\theta)\left[\left(\begin{matrix}1\\0\\0\end{matrix}\right)\cdot \left(\begin{matrix}k_x\\k_y\\k_z\end{matrix}\right)\right]\left(\begin{matrix}k_x\\k_y\\k_z\end{matrix}\right)+\left(\begin{matrix}1\\0\\0\end{matrix}\right)cos\theta + \left[\left(\begin{matrix}k_x\\k_y\\k_z\end{matrix}\right)\times \left(\begin{matrix}1\\0\\0\end{matrix}\right)\right]sin\theta\\<br>&amp;=\left[\begin{matrix}k_x^2(1-cos\theta)+cos\theta\\k_xk_y(1-cos\theta)+k_zsin\theta\\k_xk_z(1-cos\theta)-k_ysin\theta\end{matrix}\right]\end{align}</p><p>类似的，可以将 $q=\begin{vmatrix}0 &amp;1 &amp;0\end{vmatrix}^T$，$r=\begin{vmatrix}0 &amp;0 &amp;1\end{vmatrix}^T$ 经过旋转之后的形式表示为：</p><p>$$q’=\left[\begin{matrix}k_xk_y(1-cos\theta)-k_z sin\theta\\k_y^2(1-cos\theta)+cos\theta\\k_yk_z(1-cos\theta)+k_xsin\theta\end{matrix}\right]$$</p><p>$$r’=\left[\begin{matrix}k_xk_z(1-cos\theta)+k_y sin\theta\\k_yk_z(1-cos\theta)-k_xsin\theta\\k_z^2(1-cos\theta)+cos\theta\end{matrix}\right]$$</p><p>最后，可以得到等效旋转阵的形式：</p><p>$$R_r(\theta)=\left[\begin{matrix}k_x^2v\theta+c\theta&amp;k_xk_yv\theta-k_zs\theta&amp;k_xk_zv\theta+k_ys\theta\\k_xk_yv\theta+k_zs\theta&amp;k_y^2v\theta+c\theta&amp;k_yk_zv\theta-k_xs\theta\\k_xk_zv\theta-k_ys\theta&amp;k_yk_zv\theta+k_xs\theta&amp;k_z^2v\theta+c\theta\end{matrix}\right]$$</p><p>其中， $c\theta=cos\theta$ , $s\theta=sin\theta$ , $v\theta=1-cos\theta$ ，$\theta$ 是由右手定则确定的，即大拇指指向 $\hat{r}$ 的正方向。</p>]]></content>
      
      <categories>
          
          <category> Robotics </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/03/30/hello-world/"/>
      <url>/2018/03/30/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server -p 4111</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><h3 id="write-the-latex-form"><a href="#write-the-latex-form" class="headerlink" title="write the latex form"></a>write the latex form</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">the equation $<span class="variable">$x</span>=\sum_&#123;i=1&#125;^nx_i$$ is bla...</span><br></pre></td></tr></table></figure><p>$$\sum_{i=1}^n$$</p><h3 id="insert-figure"><a href="#insert-figure" class="headerlink" title="insert figure"></a>insert figure</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% img /等效轴角坐标系表示法/等效轴角坐标系表示法1.jpg 400 268 图1 旋转立体示意图 %&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Testing </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Test</title>
      <link href="/2018/03/30/test-new-post/"/>
      <url>/2018/03/30/test-new-post/</url>
      <content type="html"><![CDATA[<p>Testing for new post</p>]]></content>
      
      <categories>
          
          <category> Testing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> testing </tag>
            
            <tag> another tag </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
